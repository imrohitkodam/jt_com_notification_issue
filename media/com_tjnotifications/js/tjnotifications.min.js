/**
 * @package    TJNotifications
 *
 * @author     Techjoomla <extensions@techjoomla.com>
 * @copyright  Copyright (c) 2009-2020 TechJoomla. All rights reserved.
 * @license    GNU General Public License version 2 or later.
 */

var tjnotifications={},tjnotificationsAdmin={notification:{init:function(){jQuery(document).ready(function(){var e=document.getElementById("sms").querySelector(".ui-sortable").children;for(item of e)null!==item.querySelector("textarea")&&tjnotificationsAdmin.notification.validateSmsLength(item.querySelector("textarea"));document.formvalidator.setHandler("json",function(e){try{JSON.stringify(JSON.parse(e));return!0}catch(e){return!1}}),jQuery("fieldset").click(function(){if(status=this.id+"0",statusChange=this.id+"1","checked"==jQuery("#"+status).attr("checked")){var e=this.id.replace("status","body_ifr");if('<br data-mce-bogus="1">'==jQuery("#"+e).contents().find("body").find("p").html())return alert("Please fill the data"),jQuery("#"+this.id).find("label[for="+statusChange+"]").attr("class","btn active btn-danger"),jQuery("#"+this.id).find("label[for="+status+"]").attr("class","btn"),!1;jQuery("#"+this.id).find("label[for="+status+"]").attr("class","btn active btn-success"),jQuery("#"+this.id).find("label[for="+statusChange+"]").attr("class","btn")}}),jQuery(document).on("subform-row-add",function(e,t){var a=document.getElementById("sms").querySelector(".ui-sortable").children;for(item of a)null!==item.querySelector("textarea")&&tjnotificationsAdmin.notification.validateSmsLength(item.querySelector("textarea"))})})},validateSmsLength:function(e){var t=e.getAttribute("id"),a=160-jQuery("#"+t).val().length,r=document.querySelector("#"+t),i=t.split("jform_sms__smsfields__smsfields")[1].split("__")[0],s=parseInt(a)>0?a+" "+Joomla.JText._("COM_TJNOTIFICATIONS_NOTIFICATION_SMS_REMAINING_CHARACTER"):-1*a+" "+Joomla.JText._("COM_TJNOTIFICATIONS_NOTIFICATION_SMS_REMAINING_EXCEEDED");if(null!==r.parentNode.parentNode.parentNode.querySelector("p")){jQuery(".smsfieldsCharLimit"+i).text(s),r.parentNode.parentNode.parentNode.querySelector("p").getAttribute("class").split(" ").includes("alert-info")&&parseInt(a)<0?(jQuery(".smsfieldsCharLimit"+i).removeClass("alert-info"),jQuery(".smsfieldsCharLimit"+i).addClass("alert-danger")):(jQuery(".smsfieldsCharLimit"+i).removeClass("alert-danger"),jQuery(".smsfieldsCharLimit"+i).addClass("alert-info"))}else{var n=document.createElement("p");newPCustomClass="smsfieldsCharLimit"+i;var l=parseInt(a)>0?"alert-info":"alert-danger";n.setAttribute("class",l+" center "+newPCustomClass);var o=document.createTextNode(s);n.appendChild(o),r.parentNode.parentNode.parentNode.appendChild(n)}}}};
